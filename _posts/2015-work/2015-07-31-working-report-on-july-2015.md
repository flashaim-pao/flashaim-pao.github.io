---
layout: post
title: '工作紀實 2015年 7月'
date: 2015-07-31 09:26
image: ''
description: ''
categories:
    - 工作紀實
tags:
    - 月報
    - 知識科技
 
---
# α 產品

本月是暑期**AMG專案**的啟動月，看著青澀的工讀生們還真讓我懷念起當年的種種。而一整個月下來的戰況超乎團隊的預期，真的是非常感謝老大、各位同仁還有工讀生們的努力推廣。本團隊會繼續努力，嗡嗡嗡地開發！

## API 篇

戲法人人會變，巧妙各有不同。見識完兩家的 API 的長短後，還真的有點感觸。實際上，兩家服務的架構非常相像，然而 API 的實現上卻各有擅長。B 家方便好用，物件化程度高，操作也基於抽象化物件；反之，A 家難駕馭，物件化程度較低，偏向程序式操作。而文件與 reference 並不直覺，更是一大致命傷。然而 A 家 API 效能遠比 B 家高出太多，或許速度就是用架構換來的。也因此，本月大多卡在 A 家 API 的界接上，不過也已經摸得差不多透了，接下來可以好好地加快腳步。

## 開發工具篇

「工欲善其事，必先利其器」，開發環境是首當其衝要解決的大問題！上個月困擾著團隊的開發工具（*VBox, Docker, Node.js etc.*）於 MacOS 不穩定問題，以及難以在 Windows 底下開發的問題，我們最終找出一個終極方案.........就是**不要使用 MacOS 與 Windows**......我盡力了，真的...Orz

但難道要團隊各買一台新電腦嗎？！顯然這麼貴的方案不太實際...我給的這招**千元有找**！！！（還是要花錢...Sorry Orz）

好啦~我少掉了我製作所花的腦力成本，當然很便宜（遠望）。我幫團隊引入的方案就是**「Ubuntu 隨身碟」**！是的，就是像日劇「血色星期一」裡的超級駭客**獵鷹**一樣。每當要入侵的時候，就會拿出隨身碟插入隨便一台電腦，透過隨身碟開機進入**獵鷹專用駭客作業系統**（其實就是客製版 Linux），然後殺得壞人電腦都自爆（誤）。聽到這裡，想不想也來一顆這樣的隨身碟呀？！ XD 請向冠宇諮詢，他要幫我經銷（大誤）。

不過現實沒有日劇演的那麼帥氣（？），為了要適合用來「開發程式」，我可是煞費苦心去製作這顆隨身碟。首先，要學著怎麼製作Ubuntu 影像檔，然後在寫入隨身碟前修改影像檔。這是因為需要先放入 **WIFI 驅動程式** （沒有驅動不能用 WIFI ，沒有 WIFI 不能上網抓驅動，沒有驅動不能......）。雖然 Linux Kernel 通常已經內含很多驅動程式，但仍然不足。例如 Macbook 的驅動程式通常沒有附，得另外裝才行。

在這過程裡也得挑選合適且精減的 Ubuntu 影像檔，要知道隨身碟空間不是很大，最好是裝必要的程式就好。而我也是試了幾款才找到適合的影像檔。製作好影像檔後寫入隨身碟，使用隨身碟開機後，就要進行第2階段：「**建置開發環境**」。由於 Ubuntu 隨身碟不是一般的環境，所以很多工具都要調整過。這些問題大部份跟隨身碟所需的「檔案系統」有關，最終我混合了多種檔案系統 **fat32, casper, ext4, exfat** 總算打造好整個開發環境。之後只要買顆新的隨身碟給我複製就可以了，買隨身碟就是那唯一的成本囉~

團隊們用自己的電腦試用後，都還蠻順利的。所以，懸宕已久的開發環境問題終於告一段落...（倒）

### 本月完成：

* #2: API 實驗 - A 家
* #18: 登出功能
* #30: Theme 的動態切換與「競爭者分析」與「帳戶分析」頁面連動
* #63: 實作帳戶分析的字組分析功能
    + 依據新規格修正
* #66: 實作網站 G牌 Pagespeed 分析功能
    + 支援多組網站
    + 自動切換分數的 style
* #76: 佈署系統至正式機
    + Linode 上的 Docker 環境不同導致網路連線問題
         - docker 的 bug
         - 重新建立 bridge interface 
    + 記憶體不足，所以升級 Linode
         - 同時升級至 Linode KVM
* #91: 儲存帳戶資訊（如名稱）至資料庫用於快取
* #93: 支援並啟動 HTTP 傳輸壓縮
* #104: 實作 A 家帳戶連接功能
* #122: 實作 A 家的帳戶分析總覽頁面
* #113: 實作帳戶分析總覽的餘額顯示
* #114: 實作帳戶分析的預估離線時間
* 調查並解決 Jetty 無法正確載入 jar 檔的問題
* 協助團隊建立新版開發環境
    + Ubuntu 隨身碟
* 升級 PostgreSQL client
* 修改 Logger 的設定
    + 減少顯示於 stdout 以利於 docker 環境
* 佈署最新版本至正式機
* 建立 beta 站提供 demo 之用
* 分析與調查正式機資料庫與最新程式無法正確遷移（migration）之問題
    + V10 migration 檔案再佈署正式機後仍被修改造成正式機不一致
    + 更新版本的 migration 相依修改後的 V10 以致於無法簡單略過

### 開發中：

* #46: Safari / Mobile Safari 甚至 iOS 上的 Chrome 都無法正常登入
* #134: 無法顯示 Bing Ads 帳戶分析的總覽頁內容

### Review 並**協同修改**的項目：

* #65: 更新連結帳戶介面
* #75: 實作彈跳頁-服務條款
* #90: 增加 chips 在選單狀態
* #102: 實作帳戶分析詳細 tab「關鍵字」內頁
* #103: 實作連結帳戶頁的 Bottom Sheet 範本
* #107: 實作推播通知頁面
* #108: 實作帳戶分析詳細 tab「活動詳細」內頁
* #109: 四個系統平台tab內的簡易功能介紹

### Review 的項目：

* #45: 紀錄必須稽核的操作紀錄
* #59: 產業關鍵字csv匯入
* #64: 使用者管理啟用必須要有合約檔案上傳
* #70: 實作彈跳頁-帳戶分析-品質建議
* #71: 實作彈跳頁-帳戶分析-立即改善
* #72: 實作原生廣告-帳戶分析-總覽
* #74: 實作帳戶分析-活動及詳細頁離線卡片
* #77: 管理者新增非公司帳號 js 錯誤
* #78: 管理者停權後依然可以登入
* #80: 官網登入
* #83: 使用者產業設定
* #86: 新增網址欄位至網站體驗評比卡片、及專家建議卡片
* #89: 官網會員功能頁面路徑調整
* #92: 產業關鍵字數據資料轉檔與匯入
* #98: 後台人工儲值無法正常儲值
* #99: 實作彈跳頁-帳戶分析-pagespeed 瞭解如何改善
* #103: 實作連結帳戶頁的 Bottom Sheet 範本
* #110: 信用卡 xml 送出商家資訊錯誤問題
* #111: 接續 ＃105 套用前端到彈跳 UI
* #117: 信用卡 storeid 是分期的需調整
* #119: 帳號開通需要寄發通知信件
* #120: 官網頁面需登入頁面增加驗證檢查
* #123: 實作帳戶分析詳細 tab「推薦字」內頁
* #124: 實作帳戶分析詳細 tab「潛在競爭者」內頁
* #125: migrate V19 衝突處裡 資料庫
* #126: 增加 ptt 跟 dcard 評價卡片
* #129: 實作競爭者分析詳細 tab「總覽」內頁
* #130: 付款機制需要增加稅金

# MS

* 協助設定 domain 10個

# NADS

久久當機一次是無法避免的，而且又是找不出原因的停機。而再檢查的過程裡發現有駭客正在入侵（當然對方是自動入侵程式不是真人），手法跟 **Trace 主機** 如出一轍，都是持續嘗試登入 SSH。所以就跟上次一樣，安裝個 **fail2ban** 來擋住攻擊。是說沒有發現 DDoS 的跡象，但是網路非常不穩定，比較**擔心是硬體出了毛病**。畢竟這是*家用主機*，而我們把它 24x7 操了好幾個月了...

* 重置當機的 NADS
    + 發現遭受駭客攻擊 SSH
        - 安裝並設定 fail2ban 阻擋攻擊

# 其他

* 裕？
    + 協助設定伺服器
        - 啟用壓縮
        - 啟用瀏覽器快取
* 協助 Flashaim S1 主機安裝新的 SSL 憑證
    + https://payment.flashaim.com
