---
layout: post
title: '工作紀實 2016年 3月'
date: 2016-03-30 16:00
image: ''
description: ''
categories:
    - 工作紀實
tags:
    - 月報
    - 知識科技
 
---
# MS 產品

MS 進入成熟期，目前工作大都在於修 bug。因此，將程式佈署至測試機與正式機便是要務之一。然而信宇在執行流程遇到了狀況，因為「修正 bug」與「增加新功能」兩者上線至正式機的週期，有著不同的需求（bug 需要盡快被訂正）。在討論與改進流程後，在 MS 上實際運用，推行也頗順利。另一方面，MS 1.5 也陸續在討論當中，Andy 從客戶那端回饋了許多意見，期待下個版本的演進。

## 完成的項目

* F #39: 建立 Docker Containers 供測試與佈署之用並建立測試機
    + 測試機 http://f???????-?s.d??s.net
    + 載入正式機備份資料
* F #94 提供 phpMyAdmin 至開發環境
* 協助設定「中文網域」
    + 中文網域會被瀏覽器使用 Punycode 轉為傳統 ASCII 編碼而非原來的中文
        - www.鋅???鑄.台灣 → http://www.xn--?????????????.xn--kpry57d
    + 使用 `idn` 指令轉換中文網域得以進行伺服器的設定

# TK 產品

這個月也是持續進行搬移 TK 至 GCE 的相關工作，大都是解決開發環境遇到的問題。顯然本月 TK 程式端專注在新功能的開發，所以尚未有機會可以停機進行搬移的動作。另一方面，銷售上屢屢聽到捷報，還真是替 TK 團隊感到高興，加油！

## 完成的項目

* F #115  調整設定使後台可在 Nginx 環境正確運作
    + 起因是挪用其他專案的後台，而此後台需要伺服器提供額外的設定才能運作
    + 設定 `/adm/index.php` 為 Router
    + *順便修正登入訊息的 bug*
* B #155 在開發階段無法正確讀取修改後的靜態檔案內容
    + 主要問題出在 Nginx 伺服器預設會啟用 *sendfile* 系統服務來加速檔案的存取
        - 但是 Virtualbox 對於啟用 *sendfile* 會出現檔案系統方面的讀取問題
        - 團隊有些人使用 Virtualbox/Vagrent/DockerMachine 虛擬機器作為開發環境
    + 解決方法則在開發階段停用 sendfile 即可
* F #164 提供 phpMyAdmin 至開發環境

## 執行中的項目

* F #111 搬移 TK 至 GCE 的新主機（S3）
    + 設定寄信功能（sendgrid）

# α 產品

本月排除了一個系統啟動的問題，待下個月 S1 主機搬移到一段落後，才會繼續動工。

## 完成的項目

* 排除 Linode 停止的相關問題
    + 扣款失敗導致主機停止
        - 付款後已復原
    + Lindoe 將 Linux Kernel 自動升級至 4.5.0 導致 Docker 無法啟動
        - 降版後已恢復
        - Ref. https://github.com/docker/docker/issues/20950

# S1 主機轉移計畫

月初發生 S1 主機硬碟故障的問題，由於磁碟陣列上的硬碟皆為同一批，擔心會陸續發生狀況。由於 MS 遷移至 GCE 的效果顯著，因此決議將 S1 上的客戶網站皆遷移至 GCE 上頭（S4）。然而 S1 上的網站數量有上百個，再加上環境複雜且版本較舊，因此需要先針對幾個網站作實驗，之後才進行大規模的移動。

## 完成的項目

* 申請 Sendgrid 寄信服務並測試
    + 因為 GCE/GCE 的政策不允許自行架設 mail server
    + *25,000 封/月*的免費額度
    + 也會用於其他產品與網站

# A1 產品

新的電商網站開發計畫，目前還在討論的階段，因此先建立伺服器與開發環境等，待正式拍案後才進行開發。

## 完成的項目

* 撰寫申請 Google Cloud Platform 的說明文件
* F #1 建置 Docker 開發環境

## 執行中的項目

* F #2 建置 PHP 與前端開發環境
    + 建置 PHP Framework - Laravel 5.1 開發環境

# CP 專案

一個新案件，我協助建立開發環境與架設伺服器等工作。

## 完成的項目

* F #1 建立 Docker 執行與開發環境
* F #3 建置測試機
* F #4 建置正式機
* F #6 提供 phpMyAdmin 至開發環境

# ERP 2.0

雖然因為人力資源的關係，ERP 的進度會緩下來。但因為還有一些銜接時間，因此協助 ERP 團隊轉移開發環境至 Docker ，並於預計在 Flashaim NAS 上建立正式機，讓阿信可以先將 ERP 2.0 的部份功能上線。若日後頻寬或效能不足，再遷移至更高階的伺服器上。

* F #66 改為 Docker 執行環境
    + 由 Vagrant 轉為 Docker 開發執行環境
    + 加入 Laravel PHP Framework 的支援
    + 提供 phpMyAdmin 至開發環境

# 其他

開發工作導入流程化管理後，大家適應良好。開發工作也變得更容易追蹤、管理與回顧，尤其身兼多個開發專案也較能掌握狀況。然而「修正 bug」與「增加新功能」兩者上線至正式機的週期，有著不同的需求（bug 需要盡快被訂正）。因此需要（持續地）**流程改善**，這也是我們導入的**敏捷開發**的精神之一。隨後我發想了改良後的流程，也與大夥開會討論凝聚共識與定案。後來在實際的產品上進行得很順利，還作了一次小調整。在此，我有看到開發團隊的進步，期待將來有更大的成長。

* [擬定與撰寫新版開發流程](https://github.com/flashaim/whitebook/wiki/%E7%94%A2%E5%93%81%E9%96%8B%E7%99%BC%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B)
   
# 後記

真是恭喜公司新總部建築師入圍 *Architizer A+ Awards*！超棒的！希望能順利得獎！
