---
layout: post
title: '工作紀實 2016年 4月'
date: 2016-04-29 16:00
image: ''
description: ''
categories:
    - 工作紀實
tags:
    - 月報
    - 知識科技
 
---
# MS 產品

本月協助檢視正式機上信件內容無法顯示超商付款碼的問題，本地測試與測試機都正常。我協助從外部寄信流程去測試，但無法重現問題。最後信宇檢視程式才發現邏輯問題，導致只有正式機的網域名稱會引發此問題。如同 Joel Spolsky 所說的「[讓錯的程式看得出錯](http://goo.gl/urTBr)」，過去這些程式把 view 與 business logic 混在一起，再加上難以識別的程式區段，會讓錯誤難以檢視。這屬於軟體品質的一環，也是我想導入但還沒達成的，但做得好則可以減少成本（雖然不是那麼直觀）。另一方面，則是協助排除正式機上的安裝 npm, bower 這些前端工具的問題

## 完成的項目

* F #73 購物訂單通知信
    + 協助排除正式機信件無法顯示超商付款碼之問題
* 協助排除正式機的 npm, bower 安裝問題

# S1 主機轉移計畫

本月大部份都專注於 S1 主機的轉移，首先以某個客製化網站，嘗試建立了 Docker 執行環境的範本。使其可以再本地端重現 S1 的執行環境，也同時完成一個重要的目標：*「讓每個網站環境可以隔離並且具備獨立升級的能力」*。而後，我接著撰寫了**自動化腳本**用來同步 S1 的檔案與資料庫內容，以及建置 S4 伺服器系統環境。使得轉移的作業可以九成都是自動化，剩下就是手動測試網站正確性的工作或者排除不相容的狀況。告一段落後，則移轉此任務給信宇，而我可以接著做其他工作。

## 完成的項目

* 建立同步檔案與建置環境自動化腳本
* 建立甕??網站 docker 執行環境
    + 作為樣板
    + MySQL 5.4
    + PHP 5.4
* 建置 S4 主機環境
* 移轉此計畫給信宇

# FlashBot 試作

本月有一個實驗性的小項目為試作一個 Skype 的 Bot，協助公司內部與外部溝通上的需求。目前花了約三天時間，已完成雛型的開發。只是 survey 過程發現 Skype Desktop API 已經被微軟宣告廢止，要改以 Skype Bot Platform 來製作 Bot 。因此原先打算使用的 Hubot 也無法使用，因為 Hubot Skype Adapter 是以 Desktop API 開發的。此雛型目前遇到的難題是無法攔截群組聊天，這是因為 Skype 的群組聊天有兩種 1. P2P-based 2. Cloud-based ，而新版本的 Skype 僅能使用後者，已無法手動切換至 P2P-based 。所以已經開發好的文字記錄與截圖功能也只能放棄，待開會討論後決定是否要使用 Skype Bot Platform 來開發（但無法截圖）或者要尋求其他方案了（例如 Line 的 [Bot API](https://developers.line.me/bot-api)，同樣無法截圖）

## 完成的項目

* 建立 Skype Bot 開發環境（Desktop API）
* 文字記錄功能
* 截圖功能

# TK 產品

本月終於實行了正式機的轉移工作。過程裡發生了一些狀況，不過最終也還是順利完成了轉移，吸取了一些經驗。轉移過後預計可以承受更大的流量，也不再受限 S1 的執行環境了。

## 完成的項目

* F #111 搬移 TK 至 GCE 的新主機（S3）
    + 同步檔案與資料庫至 S3
    + 協助轉移工作
* B #250 後台 Banner 無法一次傳3張圖
    + 協助並調整測試機與正式機的上傳限制

# ERP 2.0

除了協助排除一些開發上的小狀況外，本月協助建置了正式機於 NAS 主機上。ERP 團隊會以持續交付的方式，讓 ERP 可以提早上線。待 NAS 主機無法負荷時，再搬移至更高規格的主機上。由於轉為 Docker 環境了，所以搬移主機將會是輕易的工作。

## 完成的項目

* F #67 建置正式機於 Flashaim NAS 主機

# Fresh 開發專案

本月開始了另一個電子商務專案，我則是協助系統開發環境的建置。由於 A1 專案的推遲，因此直接將 code base 轉過來（也是此開發團隊的需求）

## 完成的項目

* F #3 將 code base 轉移為新名稱
    + 從 a1 轉移過來
    + 修改資料庫設定

# 其他

* 協助排除裕?網站寄信程式問題
    + SMTP SSL/TLS 的 port 被防火牆擋住
* 協助排除天?網站寄信問題
    + 由於 *DMARC policy* 使用 *yahoo.com.tw* 為寄件人的信必須經由 Yahoo SMTP 寄出
    + ref.: https://goo.gl/mcnYdp
* 協助排除客戶 e???.com.tw 的 DNS 設定問題
    + MX 被拿掉導致無法收信
* 備份 Linode 主機
    + T???e & Ai
* 撰寫 `apiplus.tw` (for Docker Registry) 的 SSL 自動化更新腳本
