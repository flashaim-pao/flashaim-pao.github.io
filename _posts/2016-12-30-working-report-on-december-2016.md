---
layout: post
title: '工作紀實 2016年 12月'
date: 2016-12-30 16:00
comments: true
categories: 
---
# MS 產品

本月裡，協助解決整合銀行刷卡 API (Application Programming Interface) 的串接問題。經過初步的調查，發現是 PHP 執行環境*缺乏某個外掛模組*（Extension）所導致。（這邊又要再次提醒，**仔細觀察 log 檔以及訊息內容**是可以省下時間的～）此外掛模組在我當初安裝 MS 執行環境已有一併安裝，只是此外掛模組並不會自動啟用。再啟用設定檔後，重啟 PHP-FPM 卻發現沒有作用。

再次經過一番調查後才發現，Debian/Ubuntu 的 PHP-FPM 的重新啟動有 **bug** （但是官方還沒有修正，暈）。禍不單行大概就是這個意思～雖說手動砍掉舊的 PHP 行程（Process）然後啟動新的是個方法。然而為了不影響線上正在瀏覽網站的使用者，所以採取較繁複的 workaround 並且手動解決問題讓下次不再發生。

本月也與另一家 POS 廠商討論合作事宜，此廠商較為老牌且*台式機*與*雲端方案*都有，相當全面也成熟。雖然討論初期尚無法達成我方的需求，然而會後的聯絡下，雙方達成以 **API 串接雲端 POS** 的合作方式。我隨即與所有工程師集思廣益，討論出了符合 MS 所需要的 API 而且是經過*架構設計與實作之考量*的，最後提供給對方以進行 API 的開發。目前，廠商已有初步的回覆，相信之後的整合與合作會是順利的。

* 協助解決正式機缺少 PHP 外掛模組之問題
    - 銀行介接 SDK 需要此外掛模組
    - Debian/Ubuntu 版 PHP 於重新載入外掛模組有 bug 需要手動解決
        + https://bugs.launchpad.net/ubuntu/+source/php5/+bug/1242376
* 協助與 POS 廠商合作之相關事宜
    - 與第二家廠商討論
		- 研討與擬定 API 需求

# Alpha 產品

這個月持續開發爬蟲相關的程式，尤其是前端程式。這次的爬蟲改版，不僅使用了更穩定的 Selenium 外，整體分析的流程也被切細，一種分析被分為多個*子分析*程序。以往需要*所有分析都完成才有一份報告*，這次修改後便可以獨立取得不同種的報告，縮短看到報告的時間。也因此，前端程式為了因應分析報告的改變，得做*大幅度的修改*。目前，前端程式大致已修改完成，剩下細部的調整與測試。然而這段時間裡，又發生某網站本身的程式改版問題。此網站於載入資源的部份會形成無窮的等待，使得爬蟲程式無法等到網站*已載入完成的訊號*，以至於此爬蟲逾時（安全設計）。嘗試各種方案後，目前仍尚未找到解決方法，只能持續嘗試各種方案直到繞過此狀況了。只能說是，屋漏偏逢連夜雨...

* #347 Worker 重新改以 Selenium WebDriver 建置更穩定的網頁爬蟲
    + 觀察與修改各爬蟲的時間排程與網頁操作方式
        - 搜尋引擎類的爬蟲很容易被封鎖
    + 依據爬蟲系統的改變修改前端程式

# HFRE 產品

本月協助了一個不容易重現的 issue，主選單在特定的方式下移動滑鼠，有機會令主選單不會隱藏。是說，只要再次移動至任意主選單位置即恢復正常，基本上不會影響操作，發生機率也很低。經過仔細的調查後，已發現癥結並修正。Javascript 的單執行緒模型以及 JQuery 非同步的動畫系統，每當 issue 發生在時序問題上的時候，會**異常地難找出癥結**。但這是前端程式的天性，過去十幾年都沒有改善，相信再過五年也不會有進步。工程師們只好繼續多多擔待，「加油！好嗎～」

* #26 主選單沒有正確隱藏

# 其他

* 協助建立客製化網站開發環境
    + 使用 Laravel 5.1
    + 建立測試機
* 面試工程師
* 建立工程師個人測試網站
    + 如同原 S1 主機的測試空間之功能
* 調查 AdWords 是否有補款相關的 API
    + 月結制有 API
        - https://developers.google.com/adwords/api/docs/guides/budget-order
    
 