---
layout: post
title: '工作紀實 2017年 1月'
date: 2017-01-30 16:00
image: ''
description: ''
categories:
    - 工作紀實
tags:
    - 月報
    - 知識科技
 
---
# Alpha 產品

雖然本月大多時間用於其他產品與支援上，但仍持續開發 Alpha 產品。主要加入了**新的** YG 分析器，可以統計過去一個月內目標對象的廣告上線時段。此外也持續修改前端程式，使得前端能符合後端至目前的修改。

# MS 產品

本月支援 MS 產品佔較高的時間。與信用卡串接時，發生消費者刷卡後漏接銀行端所傳的訊號之問題。與對方討論後，對方提出 MS 應使用 **SSL/HTTPs 加密傳輸**之需求。由於 SSL 加密所需的憑證，經過多次運用 **Let's Encrypt** 已相當熟練。目前已申請、安裝並自動更新 SSL 憑證於 MS 特定客戶站台之上，就待時間來看這樣的措施是否可解決漏接之問題了。另一方面，某日突然發現**主硬碟空間已滿**導致無法進入後台，雖然先前曾遇過類似問題。主因是因為雲端主機之主硬碟空間較小，近日較多 Linux Kernel 的更新而佔據了空間且來不及刪除。為了根除此問題，便研究與調整 Ubuntu Linux 的**自動化更新策略**，改為自動清除舊 Kernel 檔案（預設不清除）以解決問題。

此外,某日突然收到回報指出某站台突然消失，調查發現該站台目錄遺失。所幸當年我協助轉移新主機時，同時加入的每日自動備份措施，緊急從備份當中恢復該站台目錄。之後的調查發現，由於目前系統更新的佈署採用 **VCS 切換分支**之方式來達成，某些手動複製之目錄缺少版本控管的排除清單檔（這是因為目前 MS 產品的目錄結構裡，程式檔與資料檔未分離所致，必須每個站台目錄都放排除清單檔）。以致於切換分支時，使得該目錄遺失之問題。目前已再次檢視過各個站台目錄，已確定排除清單檔的完整。

最後，由於目前 MS 產品*並非*使用**子網域**作為不同站台之切分（如 *foo.example.com* 為 *example.com* 之子網域），而是以**路徑**來切分（如 *example.com/foo*）。以搜尋引擎的索引(Indexing)方式而言，預設每個網站是以**網域**作為單位進行索引的。但其實搜尋引擎有提供工具讓我們可以定義**路徑與站台之間的對應關係**，如 Google 的 Search Console。然而採用人工輸入 MS 裡*上百個*站台對應關係是相當**況日費時**，我便協助採用搜尋引擎提供之 **API**，批次執行對應關係的設定。目前已批次新增完畢，往後的新站台則可將此步驟納入開站流程當中。不過 API 尚未開放網域驗證（證明你是網域擁有者，才能進行各項設定），因此仍需人工進行驗證。

* 申請與啟用 SSL/HTTPs 加密支援
    + 信用卡介接時由**銀行端**提出之需求
    + 使用免費憑證與自動化更新憑證
* 協助調查與解決客戶網站無法匯出資料之問題
* 協助解決主硬碟空間已滿之問題
    + 由於 Ubuntu 的自動化更新不會清除舊的更新以致於用完主硬碟
    + [設定自動化清除](https://help.ubuntu.com/community/RemoveOldKernels)
* 協助調查與解決正式機站台目錄遺失問題
    + 強制切換分支將會清除未排除的目錄
        - 某些手動複製的目錄缺少版本控管之排除清單
        - MS 的目錄架構先天之影響導致尚有許多檔案與目錄未受版本控管（程式與資料未分離）
* 協助批次新增客戶站台網址至 Google Search Console
    + 上百組以 Search Console API 送出
        - 但網域驗證仍需人工作業

# FMM 產品

年假第一天臨時發生的狀況，沒想到詐騙會對網購動歪腦筋。為了查出 IP 位址，我協助進行 access log 的蒐集與調查。由於 FMM 產品所在之主機同時運行多個產品，因此 access log 為兩層。經過蒐集、過濾與定位出 IP 所在之 log 後，便轉交給團隊繼續處理相關事宜。經過這次事件赫然驚覺，詐騙真是無孔不入，相關的資安還需要我們多加留意才行。

* 協助調查惡意的訂單與 IP 位址
    + 蒐集與整理 access log 
    + 調查與推斷訂單來源 IP 位址

# BOT 實驗

本月也繼續了暫停一段時間的 Messaging BOT 之實驗，先前由於 BOT API 未開放 BOT 加入群組，因此放棄此一平台。未料過了半年後，此平台再次開放新的 BOT API 而且加入了這些新功能。使得我們可以繼續實驗，來挖掘更多的應用潛力。這次我改採 PHP 來開發此 BOT ，目前已可 echo 對方的訊息。希望這個農曆年後可以做出個雛型應用，來探討更具體的應用情境。

# 其他

* 協助調查 S1 主機特定網站的濫發釣魚信之問題
    + 使用掃毒軟體(ClamAV)掃描
* 建立**設計師**個人測試網站
    + 如同原 S1 主機的測試空間之功能
    + 支援 PHP 與 Postgres
* 申請與安裝 SSL 至個人測試網站之網域
    + 測試各種平台的 API 若有 callback 需求則必須要有 SSL/HTTPs 加密